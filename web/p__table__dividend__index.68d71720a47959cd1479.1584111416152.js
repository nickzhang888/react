(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"+n12":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"h",function(){return s}),n.d(t,"a",function(){return f}),n.d(t,"g",function(){return p}),n.d(t,"f",function(){return h}),n.d(t,"d",function(){return m});n("p0pE"),n("gWZ8"),n("Pwec");var a=n("CtXQ"),r=n("q1tI"),o=n.n(r),i=(n("Qyje"),n("wd/R"),n("EUZL"),n("EIip")),c=n.n(i);function l(e,t){if(isNaN(parseFloat(e)))return!1;if(t){var n=Math.pow(10,t);e=(Math.round(e*n)/n).toString();var a=e.indexOf(".");a<0&&(a=e.length,e+=".");while(e.length<=a+t)e+="0"}var r=e.toString().split(".");return r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),r.join(".")}var d=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t="object"==typeof e?e.target.value.toString().split("."):e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},u=function(e){var t=e.target.value;return t&&t.includes(",")&&(t=t.split(",").join("")),t},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u5fc5\u586b\u9879";return{required:!0,validator:function(a,r,o){var i,c,l;l=r.includes(",")?r.split(",").join(""):r,l?isNaN(l)?o("\u8bf7\u8f93\u5165\u6570\u5b57"):l<=0?o("".concat(n,"\u9700\u5927\u4e8e0")):(l.includes(".")?(i=l.split(".")[0].length,c=l.split(".")[1].length):i=l.length,(i>e||c>t)&&o("\u6574\u6570\u6700\u591a".concat(e,",\u5c0f\u6570\u6700\u591a").concat(t))):o("\u8bf7\u8f93\u5165".concat(n)),o()}}};function f(e,t,n,r,i,c){return o.a.createElement("a",{onClick:c},e,o.a.createElement(a["a"],{type:"asc"==r[i].order?"caret-up":"desc"==r[i].order?"caret-down":""}),n.includes(t)?n.indexOf(t)+1:"")}function p(e,t,n,a){var r=t.find(function(t){return t.columnKey==e});r&&(""==r.order?r.order="asc":"asc"==r.order?r.order="desc":r.order="");var o=n.findIndex(function(e){return e.split(" ")[0]==r.columnKey});o>-1?(n.splice(o,1,"".concat(r.columnKey," ").concat(r.order)),a.splice(o,1,"".concat(r.columnKey))):(n.push("".concat(r.columnKey," ").concat(r.order)),a.push("".concat(r.columnKey)));var i=n.findIndex(function(e){return""==e.split(" ")[1]});i>-1&&(n.splice(i,1),a.splice(i,1))}function h(e,t){t=t||"sheet1";var n={SheetNames:[t],Sheets:{}};n.Sheets[t]=e;var a={bookType:"xlsx",bookSST:!1,type:"binary"},r=c.a.write(n,a),o=new Blob([i(r)],{type:"application/octet-stream"});function i(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0;a!=e.length;++a)n[a]=255&e.charCodeAt(a);return t}return o}function m(e,t){var n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t||"",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){URL.revokeObjectURL(e)},200)}},10:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},PMqE:function(e,t,n){e.exports={keyword:"keyword___2Ibrq",footerTable:"footerTable___O5bYC",failColor:"failColor___3uzGd",innerbox:"innerbox___30_Gi",tableList:"tableList___2f06P",tableListOperator:"tableListOperator___3GDt1",tableListForm:"tableListForm___2TPBK",submitButtons:"submitButtons___3gB0q"}},Vqex:function(e,t,n){"use strict";var a=n("jehZ"),r=n.n(a),o=(n("miYZ"),n("tsqr")),i=n("p0pE"),c=n.n(i),l=n("2Taf"),d=n.n(l),u=n("vZ4D"),s=n.n(u),f=n("l4Ni"),p=n.n(f),h=n("ujKo"),m=n.n(h),y=n("MhPg"),v=n.n(y),g=n("q1tI"),w=n.n(g),b=(n("MuoO"),n("+n12")),C=(n("17x9"),function(e){return function(t){var n;return n=function(n){function a(t){var n;return d()(this,a),n=p()(this,m()(a).call(this,t)),n.getSearchParam=function(){var e=n.state.sortArr,t=n.child.queryParam();return t=c()({},t,{sort:e}),t},n.searchList=function(){var t=n.props.dispatch,a=n.state.formValues,r=n.getSearchParam();r.start>r.end?o["a"].warn("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"):t({type:e.urlSearch,payload:c()({page:1,size:a.size},r)})},n.handleTableChange=function(t,a,r){console.log(n.child);var i=n.props.dispatch,l=(n.state.formValues,n.getSearchParam());l.start>l.end?o["a"].warn("\u5f00\u59cb\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65e5\u671f"):(n.child.setState({selectedRowKeys:[],selectedRows:[]}),i({type:e.urlSearch,payload:c()({page:t.current,size:t.pageSize},l)}).then(function(){n.setState({formValues:{page:t.current,size:t.pageSize}})}))},n.handleClickHeader=function(e){var t=n.state,a=t.sortArr,r=t.sortArrKey,o=n.child.state.sortColumns;Object(b["g"])(e,o,a,r),n.setState({sortColumns:o,sortArr:a,sortArrKey:r}),n.searchList()},n.state={formValues:{},sortArr:[],sortArrKey:[]},n}return v()(a,n),s()(a,[{key:"render",value:function(){var e=this,n={getSearchParam:this.getSearchParam,searchList:this.searchList,handleClickHeader:this.handleClickHeader,handleTableChange:this.handleTableChange};return w.a.createElement(t,r()({},this.props,this.state,n,{ref:function(t){return e.child=t}}))}}]),a}(g["PureComponent"]),n}});t["a"]=C},jtQF:function(e,t,n){"use strict";n.r(t);n("IzEo");var a,r=n("bx4M"),o=(n("MXD1"),n("CFYs")),i=(n("14J3"),n("BMrR")),c=(n("+L6B"),n("2/Rp")),l=(n("iQDF"),n("+eQT")),d=(n("5Dmo"),n("3S7+")),u=(n("g9YV"),n("wCAj")),s=(n("miYZ"),n("tsqr")),f=n("2Taf"),p=n.n(f),h=n("vZ4D"),m=n.n(h),y=n("l4Ni"),v=n.n(y),g=n("ujKo"),w=n.n(g),b=n("MhPg"),C=n.n(b),x=n("p0pE"),E=n.n(x),S=(n("y8nQ"),n("Vl3Y")),D=(n("OaEy"),n("2fM7")),F=n("q1tI"),j=n.n(F),L=n("Gs+6"),_=n("wd/R"),k=n.n(_),O=n("MuoO"),I=n("EUZL"),K=n.n(I),A=n("+n12"),M=n("Vqex");function T(e){var t=e.currentTarget;a.forEach(function(e){e!==t&&e.scrollLeft!==t.scrollLeft&&(e.scrollLeft=t.scrollLeft)})}var Y,N,q,R,z,P={mount:function(e){a=Array.from(e.querySelectorAll(".ant-table-body")),a.forEach(function(e){e.addEventListener("scroll",T)})},unMount:function(){a.forEach(function(e){e.removeEventListener("scroll",T)})}},B=P,V=n("PMqE"),U=n.n(V);Object(L["setLocale"])("zh-CN");D["a"].Option;var Z=S["a"].Item,Q={urlSearch:"dividend/queryListData"},H="YYYY-MM-DD",G=(Y=S["a"].create(),N=Object(O["connect"])(function(e){var t=e.dividend,n=e.loading;return E()({},t,{loading:n.effects["dividend/queryListData"]})}),q=Object(M["a"])(Q),Y(R=N(R=q((z=function(e){function t(e){var n;return p()(this,t),n=v()(this,w()(t).call(this,e)),n.queryParam=function(){var e=n.props.form,t=e.getFieldsValue(),a={fundCode:t.fundCode,start:t.start?k()(t.start).format(H):t.start||t.end?"1900-01-01":void 0,end:t.end?k()(t.end).format(H):t.start||t.end?"2099-12-31":void 0};return a},n.onSelectChange=function(e,t){n.setState({selectedRowKeys:e,selectedRows:t,rate:0})},n.batchSend=function(){var e=n.props,t=e.dispatch,a=e.listData.data,r=n.state,o=r.selectedRowKeys,i=r.selectedRows,c=r.rate;0!=o.length?t({type:"dividend/sendService",payload:{nId:i[c].nId}}).then(function(e){200!==e.httpStatus&&s["a"].warn(e.msg);var t=a.findIndex(function(t){return t.nId==e.data.nId});t>-1&&a.splice(t,1,e.data);var r=o.findIndex(function(e){return e==i[c].nId});o.splice(r,1),n.setState({rate:c+1}),0!=o.length?n.batchSend():s["a"].success("\u6279\u91cf\u53d1\u9001\u5df2\u5b8c\u6210,\u5982\u6709\u5931\u8d25\u8bf7\u5173\u6ce8!")}):s["a"].warn("\u8bf7\u9009\u62e9\u8981\u6279\u91cf\u53d1\u9001\u7684\u6570\u636e!")},n.renderFooter=function(e,t){var a=n.props.listData.data;e.forEach(function(e){e.fixed&&(delete e.fixed,e.render="")});var r=[{key:1,balance:34354545}],o=a.length;return o>0?j.a.createElement(u["a"],{dataSource:r,rowSelection:t,columns:e,scroll:{x:"max-content"},showHeader:!1,pagination:!1,className:U.a.footerTable}):""},n.downloadFile=function(){var e=n.props.listData.data,t=[];for(var a in e){var r={"\u4ea7\u54c1\u4ee3\u7801":e[a].fundCode,"\u4ea7\u54c1\u540d\u79f0":e[a].fundName,"\u4ea7\u54c1\u7c7b\u578b":e[a].fundType,"\u7ea2\u5229\u65e5\u671f":e[a].dividendDate,"\u5f00\u6237\u884c":e[a].bank,"\u91d1\u989d":e[a].balance,"\u652f\u4ed8\u72b6\u6001":e[a].payStatus,"\u652f\u4ed8\u5931\u8d25\u539f\u56e0":null==e[a].payFailCause?"":e[a].payFailCause};t.push(r)}var o=K.a.utils.json_to_sheet(t,{raw:!0}),i=K.a.utils.sheet_add_json(o,t,{origin:"A2"});i["B2"].s={font:{sz:14,bold:!0,color:{rgb:"FFFFAA00"}},fill:{bgColor:{indexed:64},fgColor:{rgb:"FFFF00"}}},i["!cols"]=[{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:150},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:120},{wpx:140}],i["A1"]={t:"s",v:"\u5206\u7ea2\u4eba\u5458\u4fe1\u606f\u8868"},i["A1"].s={font:{name:"\u5b8b\u4f53",sz:24,bold:!0,underline:!0,color:{rgb:"FFFFAA00"}},alignment:{horizontal:"center",vertical:"center",wrap_text:!0},fill:{bgColor:{rgb:"ffff00"}}},i["!merges"]=[{s:{c:0,r:0},e:{c:7,r:0}}],console.log(i);var c=k()(new Date).format("YYYYMMDD"),l="\u6587\u4ef6".concat(c);Object(A["d"])(Object(A["f"])(i),"".concat(l,".xlsx"))},n.state={visible:!1,sortArr:[],selectedRowKeys:[],selectedRows:[],rate:0,sortColumns:[{columnKey:"fundCode",order:""},{columnKey:"fundName",order:""},{columnKey:"fundType",order:""},{columnKey:"dividendDate",order:""},{columnKey:"bank",order:""},{columnKey:"balance",order:""},{columnKey:"payStatus",order:""},{columnKey:"payFailCause",order:""}]},n}return C()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;this.queryParam();e({type:"dividend/getSelect",payload:{}}),e({type:"dividend/queryListData",payload:{}}),B.mount(this.refBox)}},{key:"componentWillUnmount",value:function(){B.unMount()}},{key:"shouldComponentUpdate",value:function(){return B.mount(this.refBox),!0}},{key:"render",value:function(){var e=this,t=this.props,n=t.form.getFieldDecorator,a=t.listData,s=a.data,f=a.current,p=a.pageSize,h=a.total,m=t.loading,y=t.handleTableChange,v=t.searchList,g=t.handleClickHeader,w=t.sortArrKey,b=t.fundName,C=this.state,x=C.selectedRowKeys,E=C.rate,D=C.selectedRows,F=C.sortColumns,_={current:f,pageSize:p,total:h,showTotal:function(e){return"\u5171".concat(e,"\u6761\u6570\u636e")},pageSizeOptions:["10","30","50"],showSizeChanger:!0},O={onChange:this.onSelectChange,selectedRowKeys:x},I=[{title:Object(A["a"])("\u4ea7\u54c1\u4ee3\u7801","fundCode",w,F,0,function(){return g("fundCode")}),dataIndex:"fundCode",width:200,render:function(e,t){return j.a.createElement("div",{style:{color:null==t.payFailCause?void 0:"#FD5D59"}},e)}},{title:Object(A["a"])("\u4ea7\u54c1\u540d\u79f0","fundName",w,F,1,function(){return g("fundName")}),dataIndex:"fundName",width:200,render:function(e,t){return j.a.createElement("div",{style:null==t.payFailCause?void 0:{color:"#FD5D59"}},e)}},{title:Object(A["a"])("\u4ea7\u54c1\u7c7b\u578b","fundType",w,F,2,function(){return g("fundType")}),dataIndex:"fundType",width:200,render:function(e,t){return j.a.createElement("div",{style:null==t.payFailCause?void 0:{color:"#FD5D59"}},e)}},{title:Object(A["a"])("\u7ea2\u5229\u65e5\u671f","dividendDate",w,F,3,function(){return g("dividendDate")}),dataIndex:"dividendDate",width:200,render:function(e,t){return j.a.createElement("div",{style:null==t.payFailCause?void 0:{color:"#FD5D59"}},e)}},{title:Object(A["a"])("\u5f00\u6237\u884c","bank",w,F,4,function(){return g("bank")}),dataIndex:"bank",width:200,render:function(e,t){return j.a.createElement("div",{style:null==t.payFailCause?void 0:{color:"#FD5D59"}},e)}},{title:Object(A["a"])("\u91d1\u989d","balance",w,F,5,function(){return g("balance")}),dataIndex:"balance",width:200,render:function(e,t){return j.a.createElement("div",{style:{color:null==t.payFailCause?void 0:"#FD5D59",textAlign:"right"}},Object(A["c"])(e,2))}},{title:Object(A["a"])("\u652f\u4ed8\u72b6\u6001","payStatus",w,F,6,function(){return g("payStatus")}),dataIndex:"payStatus",width:200,render:function(e,t){return j.a.createElement("div",{style:null==t.payFailCause?void 0:{color:"#FD5D59"}},e)}},{title:Object(A["a"])("\u652f\u4ed8\u5931\u8d25\u539f\u56e0","payFailCause",w,F,7,function(){return g("payFailCause")}),dataIndex:"payFailCause",width:200,render:function(e,t){return j.a.createElement("div",{style:null==t.payFailCause?void 0:{color:"#FD5D59"}},e)}},{title:"\u64cd\u4f5c",dataIndex:"operate",fixed:"right",width:200,render:function(e,t){return j.a.createElement("div",null,j.a.createElement(d["a"],{title:"\u53d1\u9001"},j.a.createElement("a",{className:"iconfont icon-fasong"}))," \u2002",j.a.createElement(d["a"],{title:"\u64a4\u9500"},j.a.createElement("a",{className:"iconfont icon-revoke"})))}}];return j.a.createElement(r["a"],{bordered:!1},j.a.createElement(i["a"],null,j.a.createElement(S["a"],{layout:"inline"},j.a.createElement(Z,{label:"\u4ea7\u54c1\u540d\u79f0"},n("fundCode",{})(j.a.createElement(L["Select"],{compressed:!0,data:b,keygen:"nId",multiple:!0,placeholder:"\u8bf7\u9009\u62e9",emptyAfterSelect:!0,renderItem:function(e){return"".concat(e.fundCode,":").concat(e.fundName)},format:"fundName",onFilter:function(e){return function(t){return t.fundCode.toLowerCase().indexOf(e.toLowerCase())>=0||t.fundName.indexOf(e)>=0}},style:{width:"14vw"}}))),j.a.createElement(Z,{label:"\u65e5\u671f"},n("start",{initialValue:k()(new Date,H)})(j.a.createElement(l["a"],{format:"YYYY-MM-DD",placeholder:"\u5f00\u59cb\u65e5\u671f"}))," ","-"," ",n("end",{initialValue:k()(new Date,H)})(j.a.createElement(l["a"],{format:"YYYY-MM-DD",placeholder:"\u7ed3\u675f\u65e5\u671f"}))),j.a.createElement(Z,null,j.a.createElement(c["a"],{icon:"search",type:"primary",onClick:function(){return v()}},"\u67e5\u8be2")))),j.a.createElement(i["a"],{style:{marginTop:10}},j.a.createElement(o["a"],{percent:Math.floor(E/D.length*100*100)/100})),j.a.createElement(i["a"],{style:{marginTop:10}},j.a.createElement(c["a"],{type:"primary",onClick:this.batchSend},"\u6279\u91cf\u53d1\u9001"),"\u2002",j.a.createElement(c["a"],{type:"primary",ghost:!0,icon:"download",onClick:this.downloadFile},"\u5bfc\u51fa")),j.a.createElement("div",{ref:function(t){return e.refBox=t}},j.a.createElement(u["a"],{rowKey:"nId",dataSource:s,columns:I,onChange:y,pagination:_,loading:m,scroll:{y:" calc(100vh - 400px)",x:"max-content"},style:{marginTop:16},rowSelection:O,footer:function(){return e.renderFooter(I,O)}})))}}]),t}(F["Component"]),R=z))||R)||R)||R);t["default"]=G}}]);